import{ea as D,la as S,ma as l,na as w,pa as L}from"./chunk-5TAL54F7.js";import{Fb as h,Gb as _,Gc as y,Jc as b,Lb as g,Pb as C,Rb as c,ec as x,ia as r,ib as u,la as m,pa as p,qa as f,rb as d,vb as a}from"./chunk-4ENE35H2.js";function E(o,i){if(o&1){let s=g();h(0,"lib-ng-simple-table",1),C("selectionChange",function(e){p(s);let n=c();return f(n.updateSelection(e))}),_()}if(o&2){let s=c();a("data",s.tableData)("columnDefs",s.columnDefs)("displaySelectColumn",!0)("filterLabel",s.txt().filter)}}var R=(()=>{let i=class i{constructor(){this._dxfProcessor=r(L),this._translationService=r(D),this.txt=this._translationService.translatedContent,this.selection=new u,this.layerNames=[],this.colorMap={},this.tableData=[],this.columnDefs=[]}ngOnInit(){let t=this._dxfProcessor.getLayers();t!==void 0&&(this._buildColumnDefs(),this.layerNames=Object.keys(t),this.layerNames.forEach(e=>{if(t===void 0)return;let n=t[e];this.tableData.push({name:e,occurrences:n.entities.length,color:n.color!==void 0?this._getCssColor(n.color):"#000"})}))}updateSelection(t){let e=[];t.forEach(n=>{let v=n.name,O=this._dxfProcessor.getLayerEntities(v);e.push(...O)}),this.selection.emit(e)}_buildColumnDefs(){let t=new l("color",this.txt().color);t.type=S.COLOR,this.columnDefs=[new l("name",this.txt().name),new l("occurrences",this.txt().occurrences),t]}_getCssColor(t){let e=t.toString(16);for(;e.length<6;)e="0"+e;return"#"+e}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=m({type:i,selectors:[["app-layer-list"]],outputs:{selection:"selection"},standalone:!0,features:[x],decls:1,vars:1,consts:[[3,"data","columnDefs","displaySelectColumn","filterLabel","selectionChange",4,"ngIf"],[3,"data","columnDefs","displaySelectColumn","filterLabel","selectionChange"]],template:function(e,n){e&1&&d(0,E,1,4,"lib-ng-simple-table",0),e&2&&a("ngIf",n.tableData.length)},dependencies:[b,y,w],styles:[".color[_ngcontent-%COMP%]{height:12px;width:12px;border:1px solid #fff;border-radius:5px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;gap:10px;width:100%}"]});let o=i;return o})();export{R as LayerListComponent};
