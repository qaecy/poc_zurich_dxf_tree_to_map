import{e as D,f as l,g as w}from"./chunk-5R36C3BI.js";import{Da as S}from"./chunk-ES5NEIQU.js";import{Cc as b,Ec as x,Fb as h,Gb as g,Lb as _,Pb as C,Rb as a,dc as y,ia as c,ib as f,la as m,pa as p,qa as u,rb as d,vb as r}from"./chunk-L74SJRSF.js";function v(i,o){if(i&1){let s=_();h(0,"lib-ng-simple-table",1),C("selectionChange",function(e){p(s);let n=a();return u(n.updateSelection(e))}),g()}if(i&2){let s=a();r("data",s.tableData)("columnDefs",s.columnDefs)("displaySelectColumn",!0)}}var V=(()=>{let o=class o{constructor(){this._dxfProcessor=c(S),this.selection=new f,this.layerNames=[],this.colorMap={},this.tableData=[],this.columnDefs=[]}ngOnInit(){let t=this._dxfProcessor.getLayers();t!==void 0&&(this._buildColumnDefs(),this.layerNames=Object.keys(t),this.layerNames.forEach(e=>{if(t===void 0)return;let n=t[e];this.tableData.push({name:e,occurrences:n.entities.length,color:n.color!==void 0?this._getCssColor(n.color):"#000"})}))}updateSelection(t){let e=[];t.forEach(n=>{let O=n.name,L=this._dxfProcessor.getLayerEntities(O);e.push(...L)}),this.selection.emit(e)}_buildColumnDefs(){let t=new l("color","Color");t.type=D.COLOR,this.columnDefs=[new l("name","Name"),new l("occurrences","Occurrences"),t]}_getCssColor(t){let e=t.toString(16);for(;e.length<6;)e="0"+e;return"#"+e}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=m({type:o,selectors:[["app-layer-list"]],outputs:{selection:"selection"},standalone:!0,features:[y],decls:1,vars:1,consts:[[3,"data","columnDefs","displaySelectColumn","selectionChange",4,"ngIf"],[3,"data","columnDefs","displaySelectColumn","selectionChange"]],template:function(e,n){e&1&&d(0,v,1,3,"lib-ng-simple-table",0),e&2&&r("ngIf",n.tableData.length)},dependencies:[x,b,w],styles:[".color[_ngcontent-%COMP%]{height:12px;width:12px;border:1px solid #fff;border-radius:5px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;gap:10px;width:100%}"]});let i=o;return i})();export{V as LayerListComponent};
