import{f as w}from"./chunk-XAPEC4MY.js";import{ha as S,oa as v,va as L,wa as l,xa as E}from"./chunk-2WNVXLRE.js";import{Jb as _,Kb as g,Lc as b,Oc as D,Pb as C,Tb as x,Vb as c,ic as y,jb as u,ka as r,kb as d,na as m,ra as p,sa as f,vb as h,zb as a}from"./chunk-BPNMUSLZ.js";function P(o,n){if(o&1){let s=C();_(0,"lib-ng-simple-table",1),x("selectionChange",function(e){p(s);let i=c();return f(i.updateSelection(e))}),g()}if(o&2){let s=c();a("data",s.tableData)("columnDefs",s.columnDefs)("displaySelectColumn",!0)("filterLabel",s.txt().filter)}}var q=(()=>{let n=class n{constructor(){this._dxfProcessor=r(v),this._translationService=r(S),this._resultService=r(w),this.txt=this._translationService.translatedContent,this.selection=new d,this.layerNames=[],this.colorMap={},this.tableData=[],this.columnDefs=[],u(()=>{this._resultService.resultsUpdated(),this._update()})}updateSelection(t){let e=[];t.forEach(i=>{let M=i.name,O=this._dxfProcessor.getLayerEntities(M);e.push(...O)}),this.selection.emit(e)}_update(){let t=this._dxfProcessor.getLayers();t!==void 0&&(this._buildColumnDefs(),this.layerNames=Object.keys(t),this.layerNames.forEach(e=>{if(t===void 0)return;let i=t[e];this.tableData.push({name:e,occurrences:i.entities.length,color:i.color!==void 0?this._getCssColor(i.color):"#000"})}))}_buildColumnDefs(){let t=new l("color",this.txt().color);t.type=L.COLOR,this.columnDefs=[new l("name",this.txt().name),new l("occurrences",this.txt().occurrences),t]}_getCssColor(t){let e=t.toString(16);for(;e.length<6;)e="0"+e;return"#"+e}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=m({type:n,selectors:[["app-layer-list"]],outputs:{selection:"selection"},standalone:!0,features:[y],decls:1,vars:1,consts:[[3,"data","columnDefs","displaySelectColumn","filterLabel","selectionChange",4,"ngIf"],[3,"data","columnDefs","displaySelectColumn","filterLabel","selectionChange"]],template:function(e,i){e&1&&h(0,P,1,4,"lib-ng-simple-table",0),e&2&&a("ngIf",i.tableData.length)},dependencies:[D,b,E],styles:[".color[_ngcontent-%COMP%]{height:12px;width:12px;border:1px solid #fff;border-radius:5px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;gap:10px;width:100%}"]});let o=n;return o})();export{q as LayerListComponent};
